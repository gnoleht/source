<div id="survey" ng-controller="surveyController">
    <div class="white_box" style="overflow:auto">
        <div id="grvSurvey" class="control-grid" style="height:100%; width:100%"></div>
    </div>

    <!-- Survey-->
    <div class="modal fadeIn modal_center" role="dialog" id="modal_survey">
        <div class="modal-dialog modal-medium modal-padding" tabindex="-1">
            <div class="modal-content" style="padding-top: 0px !important">
                <div class="modal-header">
                    <p class="modal_header_title">
                        <span ng-bind="survey.name"></span>
                    </p>
                    <div class="box_btn_02">
                        <div class="box_btn_02">
                            <button type="button" class="fullscreen" onclick="fullscreen('modal_survey')" title="{{translation.BTN_SCREEN}}">
                                <i class="bowtie-icon bowtie-view-full-screen"></i>
                            </button>
                            <button type="button" class="btn_close_02" data-dismiss="modal" title="{{translation.CLOSE_DIALOG}}">
                                <i class="bowtie-icon bowtie-edit-remove"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="modal-body-maincontent" style="font-size:14px">
                        <div ng-repeat="question in surveyQuestion" style="margin-bottom:30px">
                            <div style="background-color: #c8eeff;padding: 5px;color: #545454;margin-bottom: 5px"><b>Question {{$index + 1}}: {{question.name[keyLang]}}</b></div>
                            <div ng-bind="question.description[keyLang]" class="mb_5" style="padding-left: 5px"></div>

                            <div ng-if="question.type == 'text' || question.type == 'radio'" style="padding-left: 5px">
                                <div ng-repeat="answer in question.answers" style="margin-bottom:5px; display: flex; align-items: center">
                                    <input type="{{question.type}}" ng-model="surveyResult.answerSheet[question.id][question.id]" class="mr_10" ng-style="question.type=='text'? {'border':'none','width':'100%','height':'30px','border-bottom':'1px solid #ddd'}:{'margin-left':'20px'}" name="{{question.id}}" value="{{answer.value}}" /> {{answer.text[keyLang]}}
                                </div>
                            </div>

                            <div ng-if="question.type == 'checkbox'" style="padding-left: 5px">
                                <div ng-repeat="answer in question.answers" style="margin-bottom:5px;margin-left:20px; display: flex; align-items: center">
                                    <input type="checkbox" ng-model="surveyResult.answerSheet[question.id][answer.code]" ng-true-value="'true'" class="mr_10" style="transform: scale(1.2)" /> {{answer.text[keyLang]}}
                                </div>
                            </div>

                            <div ng-if="question.type == 'grid'" style="padding-left: 5px">
                                <table class="table-striped">
                                    <tr style="text-align:center">
                                        <th class="border_n" style="{{getWidth(answerColumn.length)}}"></th>
                                        <th class="border_n" style="{{getWidth(answerColumn.length)}}" ng-repeat="answer in answerColumn = (question.answers | filter:{ type: 'column' })">
                                            {{answer.text[keyLang]}}
                                        </th>
                                    </tr>
                                    <tr ng-if="!question.multi" style="text-align:center" ng-repeat="answerRow in question.answers | filter:{ type: 'row' }">
                                        <td class="border_n" style="text-align: left;padding-left: 25px;">{{answerRow.text[keyLang]}}</td>
                                        <td class="border_n" ng-repeat="answerCol in question.answers | filter:{ type: 'column' }">
                                            <input name="{{answerRow.code}}" type="radio" value="{{answerRow.value}}_{{answerCol.value}}" ng-model="surveyResult.answerSheet[question.id][answerRow.code]" />
                                        </td>
                                    </tr>
                                    <tr ng-if="question.multi" style="text-align:center" ng-repeat="answerRow in question.answers | filter:{ type: 'row' }">
                                        <td class="border_n" style="text-align: left;padding-left: 25px;">{{answerRow.text[keyLang]}}</td>
                                        <td class="border_n" ng-repeat="answerCol in question.answers | filter:{ type: 'column' }">
                                            <input name="{{question.id}}" type="checkbox" ng-true-value="'true'" ng-model="surveyResult.answerSheet[question.id][answerRow.code + '_' + answerCol.code]" />
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button ng-click="saveSurvey()" data-dismiss="modal" class="btn btn_save_02" click-Once>
                        <i class="bowtie-icon bowtie-save"></i><span ng-bind="translation.BTN_SAVE_CLOSE">Submit</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- End History-->
    <!-- model detail-->
    <div class="modal fadeIn modal_center confirmClose" id="modal_detail">
        <div class="modal-dialog" style="width:60%">
            <div class="modal-content requirement-content" style="padding-top: 0px !important">
                <div class="modal-header clearfix">
                    <p class="modal_header_title"><span ng-bind="translation.TITLE_DESCRIPTION"></span></p>
                    <div class="box_btn_02">
                        <button type="button" class="fullscreen" onclick="fullscreen('modal_detail')" title="{{translation.BTN_SCREEN}}">
                            <i class="bowtie-icon bowtie-view-full-screen"></i>
                        </button>
                        <button type="button" class="btn_close_02" data-dismiss="modal" title="{{translation.BTN_CLOSE}}">
                            <i class="bowtie-icon bowtie-edit-remove"></i>
                        </button>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="modal-body-content clearfix">
                        <div class="modal-body-maincontent autoHeight clearfix">
                            <div class="modal-01 box_01 col_1 clearfix">
                                <div class="item">
                                    <dl class="mb-0">
                                        <dt class="dt_pos_re">
                                            <a class="h_th title_02 bg_gray_01" data-toggle="collapse" data-target="#multiCollapse_businessObjective_01" aria-expanded="true" aria-controls="multiCollapse_businessObjective_01">
                                                <i class="bowtie-icon bowtie-navigate-back-circle float-left ic_arrow"></i>
                                                <span ng-bind="translation.GENERAL_INFORMATION"></span>
                                            </a>
                                        </dt>
                                        <dd>
                                            <div class="multi-collapse collapse show" id="multiCollapse_businessObjective_01" aria-expanded="true">
                                                <div class="box_02 col_2 clearfix">
                                                    <div class="item">
                                                        <lv-input field="name" model="data.name" setting="setting" translation="translation" tab="1"></lv-input>
                                                    </div>
                                                    <div class="item">
                                                        <div class="box_02 col_2 clearfix">
                                                            <div class="item">
                                                                <lv-date field="openTime" model="data.openTime" setting="setting" translation="translation" tab="2"></lv-date>
                                                            </div>
                                                            <div class="item">
                                                                <lv-date field="closeTime" model="data.closeTime" setting="setting" translation="translation" tab="3"></lv-date>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="box_01 col_1 clearfix">
                                                    <lv-input field="description" model="data.description" setting="setting" translation="translation" type="text" tab="4"></lv-input>
                                                </div>
                                            </div>
                                        </dd>
                                    </dl>
                                </div>
                            </div>
                            <div class="modal-01 clearfix mb-0 hidden" style="height:calc(100% - 190px)" id="div_grvCriteriaCategoryDetail">
                                <div class="box_content" style="width: 100%;height:100%; margin-top: 20px;">
                                    <dl class="mb-0" style="height:100%">
                                        <dt class="dt_pos_re">
                                            <a class="h_th title_02 bg_gray_01" data-toggle="collapse" data-target="#multiCollapse_businessObjective_02" aria-expanded="true" aria-controls="multiCollapse_businessObjective_02">
                                                <i class="bowtie-icon bowtie-navigate-back-circle float-left ic_arrow"></i>
                                                <span ng-bind="translation.QUESTION_LIST"></span>
                                            </a>
                                            <ul class="box_btn clearfix mb-0 dt_pos_ab">
                                                <li>
                                                    <a href="javascript:;" ng-click="addQuestion(1)" class="left btn_30 btn_add" title="Add Section">
                                                        <i class="bowtie-icon bowtie-math-plus-light fmIconEnvision"></i>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="javascript:;" ng-click="addQuestion(2)" class="left btn_30 btn_add" title="Add Question">
                                                        <i class="bowtie-icon bowtie-math-plus-light fmIconEnvision"></i>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="javascript:;" ng-click="deleteQuestion()" class="btn_30 btn_del" title="Delete Question">
                                                        <i class="bowtie-icon bowtie-edit-delete fmIconEnvision"></i>
                                                    </a>
                                                </li>
                                            </ul>
                                        </dt>
                                        <dd style="height:calc(100% - 37px)">
                                            <div class="multi-collapse collapse show" style="height:100%" id="multiCollapse_businessObjective_02" aria-expanded="true" tabindex="5">
                                                <div class="gridWrapper">
                                                    <div id="grvSurveyQuestion" class="control-grid" style="height:100%; width:100%"></div>
                                                </div>
                                            </div>
                                        </dd>
                                    </dl>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" click-Once class="btn btn_save_02" ng-click="save()">
                        <i class="bowtie-icon bowtie-save"></i><span ng-bind="translation.BTN_SAVE_CLOSE"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- end model detail-->
    <!--modal detail question-->
    <div class="modal fadeIn modal_center" role="dialog" id="modal_detail_question" style="animation-delay:10s;">
        <div class="modal-dialog modal-medium modal-padding" tabindex="-1" style="width:50%">
            <div class="modal-content" style="padding-top: 0px !important">
                <div class="modal-header clearfix">
                    <p class="modal_header_title"><span ng-bind="translation.TITLE_MODAL_DETAIL_QUESTION"></span></p>
                    <div class="box_btn_02">
                        <button type="button" class="fullscreen" onclick="fullscreen('modal_detail_question')" title="{{translation.BTN_SCREEN}}">
                            <i class="bowtie-icon bowtie-view-full-screen"></i>
                        </button>
                        <button type="button" class="btn_close_02" data-dismiss="modal" title="{{translation.BTN_CLOSE}}">
                            <i class="bowtie-icon bowtie-edit-remove"></i>
                        </button>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="modal-body-content">
                        <div class="box_02 col_2 clearfix">
                            <div class="item">
                                <lv-input element-id="dataQuestion_name" field="name" model="dataQuestion.name" setting="setting" translation="translation" tab="1"></lv-input>
                            </div>
                            <div class="item">
                                <div class="box_02 col_2 clearfix">
                                    <div class="item">
                                        <lv-select field="answerType" model="dataQuestion.answerType" setting="setting" translation="translation" tab="2"></lv-select>
                                    </div>
                                    <div class="item">
                                        <lv-select field="questionType" model="dataQuestion.questionType" setting="setting" translation="translation" tab="3"></lv-select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="box_01 col_1 clearfix">
                            <lv-input element-id="dataQuestion_description" field="description" model="dataQuestion.description" setting="setting" translation="translation" type="text" tab="4"></lv-input>
                        </div>
                        <div class="box_01 col_1 clearfix">
                            <div class="item" ng-if="typeOfQuestion == 3" clearfix>
                                <div class="input-group mb-3" ng-repeat="item in dataQuestion.answers">
                                    <span class="mt-5">
                                        <i class="bowtie-icon bowtie-radio-button-empty" style="font-size:17px"></i>
                                    </span>
                                    <input type="text" class="style-input form-control ip_txt" ng-model="item.text">
                                    <span class="mt-5">
                                        <i class="bowtie-icon bowtie-edit-delete" style="font-size:17px" ng-click="removeRadio($index)"></i>
                                    </span>
                                </div>
                                <button type="button" class="btn btn-default" ng-click="addOtherRadio()" ng-bind="translation.ADD_OTHER"></button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button ng-click="save()" class="btn btn_save_02" click-Once tabindex="3">
                        <i class="bowtie-icon bowtie-save"></i><span ng-bind="translation.BTN_SAVE_CLOSE">Lưu & đóng</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!--end modal detail question-->
</div>

