'use strict';
app.register.controller('vendorController', ['$scope', '$location', 'authService', function ($scope, $location, authService) {
<<<<<<< HEAD
    $scope.ObjectPanelId = "ObjectPanel";
    $scope.ObjectId = "grvObject";
    $scope.dataSourceObject = [];
    $scope.headerObject = {};
    $scope.headerObject.title = vendorTranslation.Object_HeaderVendor_Title;
    $scope.headerObject.data = [{ title: vendorTranslation.Object_HeaderVendor_Total, total: 0 }, { title: vendorTranslation.Object_HeaderVendor_TopUser, total: 0 }];
    $scope.styleObject = { 'height': '100%', 'width': '100%' };
    $scope.translation = vendorTranslation;
    $scope.ObjectContactId = "grvObjectContact";
    $scope.ObjectContactPanelId = "ObjectContactPanel";
    $scope.dataSourceObjectContact = [];
    $scope.headerObjectContact = { title: vendorTranslation.ObjectContact_Total, total: 0 };
    $scope.stylePublic = { 'height': '100%', 'width': '100%' };
=======
    $scope.displayFunction = function () {
        $scope.button.delete = true;
        $scope.button.edit = true;
        $scope.button.add = true;
        $scope.button.save = true;
        $scope.button.refresh = false;
        $scope.button.copy = true;
        $scope.button.search = false;
    };
>>>>>>> origin/master

    $scope.ObjectCreditLimitId = "grvObjectCreditLimit";
    $scope.ObjectCreditLimitPanelId = "ObjectCreditLimitPanel";
    $scope.dataSourceObjectCreditLimit = [];
    $scope.headerObjectCreditLimit = { title: vendorTranslation.ObjCreditLimitTotal, total: 0 };

    $scope.ObjBankAccountId = "grvObjBankAccount";
    $scope.ObjBankAccountPanelId = "grvObjBankAccountPanel";
    $scope.dataSourceObjBankAccount = [];
    $scope.headerObjBankAccount = { title: vendorTranslation.ObjBankAccountTotal, total: 0 };

    $scope.ObjAddressPanelId = "ObjAddressPanel";
    $scope.ObjAddressId = "grvObjAddress";
    $scope.dataSourceObjAddress = [];
    $scope.headerObjAddress = { title: vendorTranslation.ObjAddressTotal, total: 0 };
    $scope.Country = [];
    $scope.Province = [];
   
    //$scope.onload = function () {

        $.ajax({
            url: 'api/fn/Vendor/Get',
            type: 'POST',
            async: false,
            success: function (response) {
                debugger;
                $scope.dataSourceObject = response.data;
                $scope.headerObject.data[0].total = response.data.length;
                $timeout(function () {
                    $scope.$apply(function () {

                        debugger
                    });
                });
            }
        });
    //};

    $scope.selectChange = function (e) {
        debugger;
        $.ajax({
            url: `api/fn/Vendor/GetByKey?objectId=${e.id}`,
            type: 'POST',
            async: false,
            success: function (response) {
                debugger;
                $scope.dataSourceObjectContact = response.data.objContact;
                $scope.headerObjectContact.total = response.data.objContact.length;
                $scope.dataSourceObjectCreditLimit = response.data.objCreditLimit;
                $scope.headerObjectCreditLimit.total = response.data.objCreditLimit.length;
                $scope.dataSourceObjBankAccount = response.data.bankAccount;
                $scope.headerObjBankAccount.total = response.data.bankAccount.length;
                $scope.dataSourceObjAddress = response.data.objAddress;
                $scope.headerObjAddress.total = response.data.objAddress.length;
                $scope.$apply();
            }
        });

    }
    $scope.$on('$routeChangeSuccess', function () {
        debugger;
        $scope.vendor = {};
        $.ajax({
            url: 'api/fn/Vendor/GetConfig',
            type: 'POST',
            async: false,
            success: function (response) {
                debugger;
                $scope.Country = response.data.country;
                $scope.Province = response.data.province;
                $scope.$apply();
               }
        });
        // $scope.grid.loadData();
    });
    $scope.search = function () {
        debugger;
        
    }
    $scope.loadData = function () {
        var url = "api/fn/Vendor/Get";
        var searchValue = $("#inputSearch").val();
        if (searchValue) url += "&searchValue=" + searchValue;
          $scope.grid.loadData(url);
    };
    $scope.searchObject = function ()
    
    {
        if ($.isEmptyObject($scope.vendor))
        {
            return;
        }
        debugger;
        $.ajax({
            url: "api/fn/Vendor/SearchObject",
            type: 'POST',
            async: false,
            data: JSON.stringify($scope.vendor),
            success: function (response) {
                            
                debugger
                $scope.headerObject.data = [{ title: vendorTranslation.Object_HeaderVendor_Total, total: response.data.length }, { title: vendorTranslation.Object_HeaderVendor_TopUser, total: 0 }];
                $scope.dataSourceObject = response.data;
                $scope.dataSourceObjectContact = [];
                $scope.headerObjectContact.total = 0;
                $scope.dataSourceObjectCreditLimit = [];
                $scope.headerObjectCreditLimit.total =0;
                $scope.dataSourceObjBankAccount = [];
                $scope.headerObjBankAccount.total =0;
                $scope.dataSourceObjAddress = [];
                $scope.headerObjAddress.total = 0;
                $scope.$apply()
              
            }
        });

        
          
       

    }
    //function
    $scope.toogleFilter = function () {
        $('.box_filter').slideToggle('100');
    }
    $scope.toogleRight = function () {
        $scope.checkRight = !$scope.checkRight;
    }

    $scope.add = function () {
    };

    
    $scope.copy = function () {
        debugger;
    };

    

    

  

}]);